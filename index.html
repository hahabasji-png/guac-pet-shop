<!DOCTYPE html>
<html>
<head>
  <title>Checkout - Guacamole GAG Hub</title>
</head>
<body style="font-family:sans-serif; padding:20px; max-width:500px; margin:auto; background:#f8fdf2; border-radius:15px;">
  <h1>Checkout</h1>
  <p>Your purchase is nearly complete! Please enter your Discord username so we can deliver your items.</p>

  <ul id="cartItems">
    <!-- Items will be listed here -->
  </ul>
  <p>Total: $<span id="total">0</span></p>

  <input type="text" id="discordUser" placeholder="Enter your Discord username" style="width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #ccc;">
  <button onclick="submitOrder()" style="background:#4CAF50; color:white; border:none; padding:10px 15px; border-radius:8px; cursor:pointer;">Submit Order</button>

  <script>
    // Example cart data (you can pass this from the previous page via query params or localStorage)
    let cart = [
      {item: "Queen Bee", price: 5},
      {item: "T-Rex", price: 8}
    ];

    let total = cart.reduce((sum, p) => sum + p.price, 0);

    let cartList = document.getElementById("cartItems");
    cart.forEach(p => {
      let li = document.createElement("li");
      li.textContent = `${p.item} - $${p.price}`;
      cartList.appendChild(li);
    });
    document.getElementById("total").textContent = total;

    function submitOrder() {
      let discordUser = document.getElementById("discordUser").value;
      if(!discordUser) {
        alert("Please enter your Discord username!");
        return;
      }

      // Replace with your Discord webhook URL
      let webhookUrl = "https://discord.com/api/webhooks/1412434264473079930/ru8gmyyFo8HlPxL5RU0krpRKy56gsaGJ6U1z58JD0u4vT7NnrvLRivuW9YhIzTAZ4D7I";

      fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          content: `New Order!\nDiscord: ${discordUser}\nItems: ${cart.map(p => p.item + " - $" + p.price).join(", ")}\nTotal: $${total}`
        })
      }).then(() => {
        alert("Order submitted! We will handle your purchase via Discord.");
      }).catch(err => {
        console.error(err);
        alert("Failed to send order. Try again.");
      });
    }
  </script>
</body>
</html>
